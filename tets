import React, { useEffect } from 'react';
import axios from 'axios';
import { useSpinner } from './SpinnerContext';

const SpinnerDemoComponent = () => {
  const { show, hide } = useSpinner();

  useEffect(() => {
    const fetchData = async () => {
      try {
        show('Loading data...');

        // Replace this with your actual API endpoint
        const apiUrl = 'https://jsonplaceholder.typicode.com/posts';
        
        const response = await axios.get(apiUrl);
        const data = response.data;

        console.log('API response:', data);

        // Hide the spinner when the response is received
        hide();
      } catch (error) {
        console.error('Error fetching data:', error);
        // Handle error and hide the spinner
        hide();
      }
    };

    fetchData();
  }, [show, hide]);

  return (
    <div>
      <h2>Data will load shortly...</h2>
    </div>
  );
};

export default SpinnerDemoComponent;
